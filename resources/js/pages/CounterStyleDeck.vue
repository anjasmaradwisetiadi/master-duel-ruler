<template>
    <div id="CounterStyleDeck" class="mt-4">
        <div class="row justify-content-center mb-5">
            <div class="col-8 ">
                <input type="text" class="form-control" id="Search" aria-describedby="Search" placeholder="Search...">
            </div>
        </div>
        <div class="row mb-1">
            <div class="col">
                <button type="button" class="btn btn-secondary"><a :href="urlCreateDeck" class="add-new-counter-link">Add New Counter</a></button>
            </div>
        </div>
        <div class="row">
            <div v-for="(card,index) in cardListCounterStyle" :key="index" class="col-lg-3 col-md-4">
                <div class="card mb-3 card-style">
                    <a :href="collectionUrl.baseUrlHead+'counter-style-deck/'+card.slug" class="target-style text-black">
                        <div class="row no-gutters">
                        <div class="col-md-4 no-gutters">
                            <img class="image-crop-resize" :src="card.image" :alt="card.name">
                        </div>
                        <div class="col-md-8">
                            <!-- <div class="card-body">
                                <h5 class="card-title">Card title</h5>
                            </div> -->
                            <div class="ml-2 text-left">
                                <h6 class="target-style title-card">{{ card.title }}</h6>
                                <span class="date-update text-muted target-style">Update: {{ dayjs(card.updated_at).format('D-MMM-YYYY')  }}</span>
                            </div>
                        </div>
                    </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>

import { computed, ref, onMounted, onBeforeMount, onBeforeUpdate } from 'vue';
import { useRouter } from 'vue-router'
import {collectionUrl} from '../urlCollect'
import { useStore } from 'vuex'
const dayjs = require('dayjs')

const store = useStore();
const router = useRouter();

const cardListCounterStyle = computed(()=>{
    return store.getters.getterListCounterStyle
})

let urlCreateDeck = ref(collectionUrl.baseUrlHead+'counter-style-deck/create');

onBeforeMount(()=>{
    console.log("trigger getListApi counter-style-deck-api = ")
    store.dispatch('getListCounterStyle')
})

onMounted(()=>{
    console.log("ini routing testing = ")
    console.log(router.currentRoute)
})



</script>
<style>
    .card{
        color: black;
    }
    .card-style {
        border: 2px solid #03182c;
        max-height: 84px;
        cursor: pointer;
        
    }
    .image-crop-resize{
        max-width: 82px;
        max-height: 80px;
        border: 2px solid black;
    }
    h4{
        font-weight: 600 !important;
        padding: 0px !important;
        margin: 0px !important;
    }
    .date-update{
        font-size: 12px;
    }
    .target-style{
        text-decoration: none !important;
        color: black;
    }
    .target-style:hover{
        text-decoration: none !important;
    }

    .add-new-counter-link{
        text-decoration: none !important;
        color: white;
    }
    .add-new-counter-link:hover{
        text-decoration: none !important;
        color: white;
    }
    .title-card{
        font-weight: bold;
        text-transform: uppercase;
    }

</style>